#!/bin/bash

names=()
lines=()
widths=()
max_width=9  # "File Name" の表示幅

for item in *; do
  if [[ "$item" =~ \.(md|txt|mkd)$ ]]; then
    names+=("$item")
    lines+=("$(head -n1 "$item")")
    w=$(printf '%s' "$item" | wc -L)
    widths+=("$w")
    (( w > max_width )) && max_width=$w
  fi
done

# 区切り線生成
sep=""
for ((i=0; i<max_width; i++)); do sep+="─"; done

# ヘッダー
printf "%-${max_width}s │ %s\n" "File Name" "1st line"
printf "%s─┼─────────\n" "$sep"

# データ
for i in "${!names[@]}"; do
  pad=$((max_width - widths[i]))
  printf "%s%*s │ %s\n" "${names[$i]}" "$pad" "" "${lines[$i]}"
done
